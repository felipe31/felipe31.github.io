<!doctype html>
<html>
<head>
  <title>Felipe Soares</title>

  <meta charset="utf-8" />
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">          
  </script>
  <script type="module">
    import { request } from "https://cdn.skypack.dev/@octokit/request";
    const user = 'Felipe31';
    function fetchRepos(user) {
      try {
        const response = request(`GET /users/${user}/repos`);
        return new Promise((resolve, reject) => {
          resolve(response);
        });
      }
      catch (err) {
        console.log('fetch failed', err);
      }
    }
    function fetchRepoDetails(user, repo) {
      try {
        const response = request(`GET /repos/${user}/${repo}`);
        return new Promise((resolve, reject) => {
          resolve(response);
        });
      }
      catch (err) {
        console.log('fetch failed', err);
      }
    }

    function createList(json) {
      const listElement = document.createElement('div');
      listElement.classList.add('list-group');
      console.log(json)

      for (var i = 0; i < json['data'].length; i++) {
        // create an item for each one
        const listItem = document.createElement('a');
        listItem.classList.add('list-group-item');
        listItem.classList.add('list-group-item-action');
        listItem.classList.add('d-flex');
        listItem.classList.add('justify-content-between');
        listItem.classList.add('align-items-start');
        listItem.href = json['data'][i]['html_url'];
        listItem.target = '_blank';

        // Add the item text
        listItem.innerHTML =  json['data'][i]['name'] ;

        fetchRepoDetails(user, json['data'][i]['name'])
          .then(response => {
            if (response['data']['language'] != null)
              listItem.innerHTML += "<span class='badge bg-primary rounded-pill'>"
                                    + response['data']['language'] + "</span>";
            console.log(response);
            const repoList = document.getElementById('repo-list');
            repoList.innerHTML = '';
            repoList.appendChild(listElement);

          })

        // Add listItem to the listElement
        listElement.appendChild(listItem);
      }

    }
    fetchRepos(user).then(response => createList(response))


  </script>
</head>

<body class="bg-dark">
<div>
  <nav class="navbar navbar-dark bg-dark navbar-nav-scroll">
    <div class="container-fluid justify-content-center">
      <a class="navbar-brand" href="#">Felipe Soares</a>
      <a class="btn btn-success me-2" href="mailto:felipe31soares@gmail.com" target="_blank">Email me!</a>
    </div>
  </nav>
  <div class="container bg-light mx-auto p-5 border rounded">
    <div class="row justify-content-center">
      <div class="col">
        <div class="d-flex justify-content-center">
          <img class="shadow mb-5 bg-body rounded" height="150" width="150" 
                src="https://www.gravatar.com/avatar/682b7d12eff096b4d35ee3437020e081?s=200" alt="Felipe's picture" />
        </div>
        <div>
          <h2>Hello there!</h2>
          <p>Welcome to my page! Let me tell you a bit about who I am.</p>
          <p>
            I hold a Bachelor's degree in Computer Science from the Federal University of Technology – Paraná, Brazil.
            I also have a Master's degree in Information Systems from the Polytechnic Institute of Bragança, Portugal.
          </p>
          <p>
            Besides CS, I have experience teaching basic informatics, and I have worked almost a year in the human
            resources department.
            As for hobbies, I am currently learning French. I also like to learn to take pictures and produce videos in
            my free time, which you can check <a target="_blank" href="https://instagram.com/felipesfotos">here</a>. 
          </p>
          <p>
            Now back to CS, my favorite book is "Introduction to Algorithms" by Thomas H. Cormen. The "data structure" 
            topic was the one I most enjoyed investing time, back in graduation. I find it very interesting to learn 
            the best way to manipulate data, as in sorting algorithms. I also loved to learn how to store data most
            efficiently for each use, as in heaps, stack, and queues.
          </p>
          <p>
            If you want, you can take a look at my repositories. Most of them I made for university's subject and
            studies. Most recently, I have started doing off-work projects to learn new technologies.
            For example, I made the GitHub browser project to learn a little bit of Flutter.
          </p>
          <p>
            I should improve the "readme" of the relevant projects soon. If you have any suggestions of anything I could
            make better, please, let me know.            
          </p>
        </div>
      </div>
      <div class="col">
        <h3>Repository List</h3>
        <div id="repo-list">
          <div class="d-flex justify-content-center">
            <div class="spinner-border text-dark" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
